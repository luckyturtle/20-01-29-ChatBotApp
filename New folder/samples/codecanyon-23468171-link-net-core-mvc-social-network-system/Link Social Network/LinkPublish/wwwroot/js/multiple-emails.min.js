(function(n){n.fn.multiple_emails=function(t){var i=n.extend({},{checkDupEmail:!0,theme:"Bootstrap",position:"top"},t),r="";return i.theme.toLowerCase()=="Bootstrap".toLowerCase()?r='<a href="#" class="multiple_emails-close" title="Remove"><span class="glyphicon glyphicon-remove"><\/span><\/a>':i.theme.toLowerCase()=="SemanticUI".toLowerCase()||i.theme.toLowerCase()=="Semantic-UI".toLowerCase()||i.theme.toLowerCase()=="Semantic UI".toLowerCase()?r='<a href="#" class="multiple_emails-close" title="Remove"><i class="remove icon"><\/i><\/a>':i.theme.toLowerCase()=="Basic".toLowerCase()&&(r='<a href="#" class="multiple_emails-close" title="Remove"><i class="basicdeleteicon">Remove<\/i><\/a>'),this.each(function(){function o(i,u){var e=i.val().trim().replace(/^,|,$/g,"").replace(/^;|;$/g,""),h,c,o;for(e=e.replace(/"/g,""),e=e.split(/[\s,;]+/),h=[],c=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i),o=0;o<e.length;o++)u===!0&&f.val().indexOf(e[o])!=-1?e[o]&&e[o].length>0&&new function(){var n=t.find(".email_name[data-email="+e[o].toLowerCase().replace(".","\\.").replace("@","\\@")+"]");n.css("font-weight","bold");setTimeout(function(){n.css("font-weight","")},1500)}:c.test(e[o])==!0?t.append(n('<li class="multiple_emails-email"><span class="email_name" data-email="'+e[o].toLowerCase()+'">'+e[o]+"<\/span><\/li>").prepend(n(r).click(function(t){n(this).parent().remove();s();t.preventDefault()}))):h.push(e[o]);h.length>0?i.val(h.join("; ")).addClass("multiple_emails-error"):i.val("");s()}function s(){var t=[],i=f.siblings(".multiple_emails-container");i.find(".multiple_emails-email span.email_name").each(function(){t.push(n(this).html())});f.val(JSON.stringify(t)).trigger("change")}function h(n){try{JSON.parse(n)}catch(t){return!1}return!0}var f=n(this),t=n('<ul class="multiple_emails-ul" />'),u,e;return n(this).val()!=""&&h(n(this).val())&&n.each(jQuery.parseJSON(n(this).val()),function(i,u){t.append(n('<li class="multiple_emails-email"><span class="email_name" data-email="'+u.toLowerCase()+'">'+u+"<\/span><\/li>").prepend(n(r).click(function(t){n(this).parent().remove();s();t.preventDefault()})))}),u=n('<input type="text"   class="multiple_emails-input text-left"  placeholder="type email list"/>').on("keyup",function(t){n(this).removeClass("multiple_emails-error");var u=n(this).val().length,r;window.event?r=t.keyCode:t.which&&(r=t.which);r==9||r==32||r==188?o(n(this),i.checkDupEmail):r==13&&(o(n(this),i.checkDupEmail),t.preventDefault())}).on("blur",function(){n(this).val()!=""&&o(n(this),i.checkDupEmail)}),e=n('<div class="multiple_emails-container" />').click(function(){u.focus()}),i.position.toLowerCase()==="top"?e.append(t).append(u).insertAfter(n(this)):e.append(u).append(t).insertBefore(n(this)),n(this).hide()})}})(jQuery);